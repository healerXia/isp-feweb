webpackJsonp([11],{125:function(t,e,a){a(493);var n=a(61)(a(401),a(531),"data-v-f77870bc",null);t.exports=n.exports},158:function(t,e,a){t.exports={default:a(160),__esModule:!0}},160:function(t,e,a){a(162),t.exports=a(6).Object.assign},161:function(t,e,a){"use strict";var n=a(12),i=a(34),r=a(18),o=a(32),c=a(63),s=Object.assign;t.exports=!s||a(9)(function(){var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach(function(t){e[t]=t}),7!=s({},t)[a]||Object.keys(s({},e)).join("")!=n})?function(t,e){for(var a=o(t),s=arguments.length,l=1,d=i.f,f=r.f;s>l;)for(var A,p=c(arguments[l++]),h=d?n(p).concat(d(p)):n(p),u=h.length,C=0;u>C;)f.call(p,A=h[C++])&&(a[A]=p[A]);return a}:s},162:function(t,e,a){var n=a(10);n(n.S+n.F,"Object",{assign:a(161)})},178:function(t,e,a){t.exports={default:a(179),__esModule:!0}},179:function(t,e,a){var n=a(6),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},401:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(178),i=a.n(n),r=a(158),o=a.n(r);e.default={data:function(){return{id:"",searchIndex:-1,titleTxt:"配置审批链",title:["创建审批链","配置审批链"],active:!1,groups:[],formTypeId:0,formValidate:{name:"",processName:"",checkAllGroup:[],orderType:[]},indeterminate:!0,checkAll:!1,data:[{step:1,group:"",passAlert:!1,failAlert:!1},{step:2,group:"",passAlert:!1,failAlert:!1},{step:3,group:"",passAlert:!1,failAlert:!1}],selectData:[],ruleValidate:{name:[{required:!0,message:"请填写单据名称",trigger:"change"},{validator:function(t,e,a){""===e.trim()?a(new Error("请填写单据名称")):e.trim().length>50?a(new Error("长度不能超过50个字")):a()},trigger:"change"}],processName:[{required:!0,message:"请选择流程名称",trigger:"change"}],orderType:[{required:!0,type:"array",message:"请选择业务类型",trigger:"change"}]},dataList:[],orderNameList:[],orderType:[]}},mounted:function(){var t=this,e=this.$router.currentRoute.query.id;this.titleTxt=e?"配置审批链":"创建审批链",this.$http.get("/isp-process-server/formType/all").then(function(a){if(0==a.data.errorCode){t.dataList=o()([],a.data.result);for(var n=0;n<t.dataList.length;n++)t.dataList[n].id=""+t.dataList[n].id;e&&(t.id=e,t.$http.get("/isp-process-server/auditChain/getModel",{params:{id:e}}).then(function(e){if(0==e.data.errorCode){var a=o()({},e.data.result);t.formValidate.name=a.chainName,t.formTypeId=""+a.formType;for(var n=0;n<t.dataList.length;n++)if(t.formTypeId==t.dataList[n].id){t.formValidate.processName=t.dataList[n].formTypeName;break}t.formValidate.checkAllGroup=a.subFormType.split(","),t.formValidate.orderType=a.formVariable.split(",");var i=[];t.data=a.listUserGroup;for(var r=0;r<a.listUserGroup.length;r++)t.data[r].group={groupId:a.listUserGroup[r].groupId,groupName:a.listUserGroup[r].groupName};for(var c=0;c<a.listUserGroup.length;c++)i.push({groupId:a.listUserGroup[c].groupId,groupName:a.listUserGroup[c].groupName});for(var s={},l=[],d=0;d<i.length;d++)s[i[d].groupId]||(l.push(i[d]),s[i[d].groupId]=1);t.groups=l,setTimeout(function(){for(var t=document.querySelectorAll(".ivu-select-input"),e=0;e<t.length;e++)t[e].value=i[e].groupName})}}).catch(function(t){console.log(t)}))}}).catch(function(t){console.log(t)}),setTimeout(function(){document.querySelector("#chainConfig").onclick=function(t){document.querySelector(".layer")&&document.querySelector(".layer").setAttribute("class","layer")}})},methods:{searchClick:function(t){this.searchIndex=t},handleSubmit:function(t,e){var a=this;this.$refs[t].validate(function(n){if(n){if(0==a.formValidate.checkAllGroup.length)return a.$Modal.info({title:"提示",content:"请选择流程分类",onOk:function(){setTimeout(function(){document.querySelector(".layer")&&document.querySelector(".layer").setAttribute("class","layer active")})}}),!1;for(var r=[],o=0;o<a.data.length;o++){if(!a.data[o].group.groupId)return a.$Modal.info({title:"提示",content:"请填写用户组",onOk:function(){}}),!1;r[o]={step:a.data[o].step,groupId:a.data[o].group.groupId,groupName:a.data[o].group.groupName,passAlert:a.data[o].passAlert,failAlert:a.data[o].failAlert}}var c={chainName:a.formValidate.name,formType:a.formTypeId,subFormType:a.formValidate.checkAllGroup.join(","),formVariable:a.formValidate.orderType.join(","),userGroups:i()(r)};a.id&&(c.id=a.id),a.$http.post("/isp-process-server/auditChain/save",c).then(function(n){0==n.data.errorCode?(a.$Message.success("保存成功"),1==e?setTimeout(function(){a.$router.push("chainConfig"),a.$refs[t].resetFields(),a.submitData={}},1e3):setTimeout(function(){a.$router.push("approvalManagement"),a.$refs[t].resetFields(),a.submitData={}},1e3)):a.$Modal.error({title:"提示",content:n.data.errorMsg,onOk:function(){a.formValidate.name=""}})})}})},layerClick:function(){document.querySelector(".layer").setAttribute("class","layer active")},handleReset:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"是否取消当前操作并跳转至列表页？",cancel:"取消",onOk:function(){e.$router.push("approvalManagement")},onCancel:function(){}})},handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.formValidate.checkAllGroup=o()([],this.orderNameList):this.formValidate.checkAllGroup=[],document.querySelector(".layer")&&document.querySelector(".layer").setAttribute("class","layer active")},checkAllGroupChange:function(t){t.length===this.orderNameList.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1),document.querySelector(".layer")&&document.querySelector(".layer").setAttribute("class","layer active")},checkProcess:function(t){for(var e={},a=0;a<this.dataList.length;a++)this.dataList[a].formTypeName==t.value&&(e=o()({},this.dataList[a]),this.formTypeId=this.dataList[a].id);e.formVariable&&(this.orderNameList=e.formVariable.split(",")),e.subFormType?this.orderType=e.subFormType.split(","):this.orderNameList=[],this.active=!0,document.querySelector(".layer")&&document.querySelector(".layer").setAttribute("class","layer active")},remoteGroup:function(t){var e=this;""!==t&&(this.loading1=!0,setTimeout(function(){if(e.loading1=!1,!t)return!1;e.$http.get("/isp-process-server/userGroup/getList",{params:{groupName:t,pageIndex:1,pageSize:10}}).then(function(t){0==t.data.errorCode?e.groups=o()([],t.data.result.resultList).map(function(t){return{groupId:t.groupId,groupName:t.groupName}}):e.groups=[]}).catch(function(t){console.log(t)})},200))}}}},459:function(t,e,a){e=t.exports=a(120)(!0),e.push([t.i,"#chainConfig[data-v-f77870bc]{padding:0 30px;min-height:600px}#chainConfig .title[data-v-f77870bc]{margin:58px 0 30px;font-size:14px;color:#354052}#chainConfig .save[data-v-f77870bc],#chainConfig .saveNext[data-v-f77870bc]{margin-right:20px;width:120px;height:38px;background:#4373f3;border-radius:2px;border-color:#4373f3}#chainConfig .save[data-v-f77870bc]:hover,#chainConfig .saveNext[data-v-f77870bc]:hover{opacity:.9}#chainConfig .tableList[data-v-f77870bc]{margin-bottom:30px}#chainConfig .cancel[data-v-f77870bc]{width:120px;height:38px;background:#484e58;border-radius:2px;color:#fff;border-color:#484e58}#chainConfig .cancel[data-v-f77870bc]:hover{opacity:.9}#chainConfig .text[data-v-f77870bc]{width:400px;height:38px;line-height:38px}#chainConfig .text .selectText[data-v-f77870bc]{width:100%}#chainConfig .ivu-select-placeholder[data-v-f77870bc]{line-height:38px}#chainConfig .ivu-checkbox-wrapper[data-v-f77870bc]{font-size:14px}#chainConfig .ivu-select-placeholder[data-v-f77870bc]{height:38px}#chainConfig .process[data-v-f77870bc]{position:relative}#chainConfig .layer[data-v-f77870bc]{background:#fff;padding:10px;width:400px;border:1px solid #ccc;z-index:999;display:none;max-height:300px;overflow:auto}#chainConfig .layer.active[data-v-f77870bc]{display:block}#chainConfig .layer .title[data-v-f77870bc]{margin:0;font-size:14px}#chainConfig .user[data-v-f77870bc]{width:100%;min-width:1104px}#chainConfig .user thead[data-v-f77870bc]{width:100%;text-align:left;background:#f9fafc;border-radius:2px 2px 0 0}#chainConfig .user thead td[data-v-f77870bc]:first-child{padding:0 30px}#chainConfig .user thead td[data-v-f77870bc]:nth-child(2){padding-right:30px}#chainConfig .user td[data-v-f77870bc]{height:56px;text-align:left}#chainConfig .user .name[data-v-f77870bc]{padding-right:30px}#chainConfig .user tbody tr[data-v-f77870bc]{box-shadow:0 1px 0 0 #dee1e5}#chainConfig .user tbody tr[data-v-f77870bc]:hover{background:#ebf7ff}#chainConfig .user tbody tr td[data-v-f77870bc]:first-child{padding:0 30px}#chainConfig .user tbody tr td[data-v-f77870bc]:nth-child(2){padding-right:30px}#chainConfig .user tbody tr .pass[data-v-f77870bc]{margin-right:20px}#chainConfig .user tbody td[data-v-f77870bc]{text-indent:0}#chainConfig .user tbody a[data-v-f77870bc]{text-align:left}#chainConfig .user .tableInput td .text[data-v-f77870bc]{width:80%}","",{version:3,sources:["/Users/yiche/Desktop/company/newfe/isp_feweb/src/pages/approval/chainConfig/chainConfig.vue"],names:[],mappings:"AACA,8BACE,eAAuB,AACvB,gBAAkB,CACnB,AACD,qCACI,mBAAsB,AACtB,eAAgB,AAChB,aAAe,CAClB,AACD,4EACI,kBAAmB,AACnB,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,oBAAsB,CACzB,AACD,wFACM,UAAa,CAClB,AACD,yCACI,kBAAoB,CACvB,AACD,sCACI,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,WAAY,AACZ,oBAAsB,CACzB,AACD,4CACM,UAAa,CAClB,AACD,oCACI,YAAa,AACb,YAAa,AACb,gBAAkB,CACrB,AACD,gDACM,UAAY,CACjB,AACD,sDAEI,gBAAkB,CACrB,AACD,oDACI,cAAgB,CACnB,AACD,sDACI,WAAa,CAChB,AACD,uCACI,iBAAmB,CACtB,AACD,qCACI,gBAAiB,AACjB,aAAc,AACd,YAAa,AACb,sBAAuB,AACvB,YAAa,AACb,aAAc,AACd,iBAAkB,AAClB,aAAe,CAClB,AACD,4CACM,aAAe,CACpB,AACD,4CACM,SAAU,AACV,cAAgB,CACrB,AACD,oCACI,WAAY,AACZ,gBAAkB,CACrB,AACD,0CACM,WAAY,AACZ,gBAAiB,AACjB,mBAAoB,AACpB,yBAA2B,CAChC,AACD,yDACQ,cAAuB,CAC9B,AACD,0DACQ,kBAAoB,CAC3B,AACD,uCACM,YAAa,AACb,eAAiB,CACtB,AACD,0CACM,kBAAoB,CACzB,AACD,6CACM,4BAA8B,CACnC,AACD,mDACQ,kBAAoB,CAC3B,AACD,4DACQ,cAAuB,CAC9B,AACD,6DACQ,kBAAoB,CAC3B,AACD,mDACQ,iBAAmB,CAC1B,AACD,6CACM,aAAe,CACpB,AACD,4CACM,eAAiB,CACtB,AACD,yDACM,SAAW,CAChB",file:"chainConfig.vue",sourcesContent:["\n#chainConfig[data-v-f77870bc] {\n  padding: 0 30px 0 30px;\n  min-height: 600px;\n}\n#chainConfig .title[data-v-f77870bc] {\n    margin: 58px 0 30px 0;\n    font-size: 14px;\n    color: #354052;\n}\n#chainConfig .saveNext[data-v-f77870bc], #chainConfig .save[data-v-f77870bc] {\n    margin-right: 20px;\n    width: 120px;\n    height: 38px;\n    background: #4373F3;\n    border-radius: 2px;\n    border-color: #4373F3;\n}\n#chainConfig .saveNext[data-v-f77870bc]:hover, #chainConfig .save[data-v-f77870bc]:hover {\n      opacity: 0.9;\n}\n#chainConfig .tableList[data-v-f77870bc] {\n    margin-bottom: 30px;\n}\n#chainConfig .cancel[data-v-f77870bc] {\n    width: 120px;\n    height: 38px;\n    background: #484E58;\n    border-radius: 2px;\n    color: #fff;\n    border-color: #484E58;\n}\n#chainConfig .cancel[data-v-f77870bc]:hover {\n      opacity: 0.9;\n}\n#chainConfig .text[data-v-f77870bc] {\n    width: 400px;\n    height: 38px;\n    line-height: 38px;\n}\n#chainConfig .text .selectText[data-v-f77870bc] {\n      width: 100%;\n}\n#chainConfig .ivu-select-placeholder[data-v-f77870bc] {\n    height: 38px;\n    line-height: 38px;\n}\n#chainConfig .ivu-checkbox-wrapper[data-v-f77870bc] {\n    font-size: 14px;\n}\n#chainConfig .ivu-select-placeholder[data-v-f77870bc] {\n    height: 38px;\n}\n#chainConfig .process[data-v-f77870bc] {\n    position: relative;\n}\n#chainConfig .layer[data-v-f77870bc] {\n    background: #fff;\n    padding: 10px;\n    width: 400px;\n    border: 1px solid #ccc;\n    z-index: 999;\n    display: none;\n    max-height: 300px;\n    overflow: auto;\n}\n#chainConfig .layer.active[data-v-f77870bc] {\n      display: block;\n}\n#chainConfig .layer .title[data-v-f77870bc] {\n      margin: 0;\n      font-size: 14px;\n}\n#chainConfig .user[data-v-f77870bc] {\n    width: 100%;\n    min-width: 1104px;\n}\n#chainConfig .user thead[data-v-f77870bc] {\n      width: 100%;\n      text-align: left;\n      background: #F9FAFC;\n      border-radius: 2px 2px 0 0;\n}\n#chainConfig .user thead td[data-v-f77870bc]:nth-child(1) {\n        padding: 0 30px 0 30px;\n}\n#chainConfig .user thead td[data-v-f77870bc]:nth-child(2) {\n        padding-right: 30px;\n}\n#chainConfig .user td[data-v-f77870bc] {\n      height: 56px;\n      text-align: left;\n}\n#chainConfig .user .name[data-v-f77870bc] {\n      padding-right: 30px;\n}\n#chainConfig .user tbody tr[data-v-f77870bc] {\n      box-shadow: 0 1px 0 0 #DEE1E5;\n}\n#chainConfig .user tbody tr[data-v-f77870bc]:hover {\n        background: #ebf7ff;\n}\n#chainConfig .user tbody tr td[data-v-f77870bc]:nth-child(1) {\n        padding: 0 30px 0 30px;\n}\n#chainConfig .user tbody tr td[data-v-f77870bc]:nth-child(2) {\n        padding-right: 30px;\n}\n#chainConfig .user tbody tr .pass[data-v-f77870bc] {\n        margin-right: 20px;\n}\n#chainConfig .user tbody td[data-v-f77870bc] {\n      text-indent: 0;\n}\n#chainConfig .user tbody a[data-v-f77870bc] {\n      text-align: left;\n}\n#chainConfig .user .tableInput td .text[data-v-f77870bc] {\n      width: 80%;\n}\n"],sourceRoot:""}])},493:function(t,e,a){var n=a(459);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(121)("72c67ab6",n,!0)},531:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"chainConfig"}},[a("p",{staticClass:"title"},[t._v(t._s(t.titleTxt))]),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":90}},[a("Form-item",{attrs:{label:"审批链名称",prop:"name"}},[a("Input",{staticClass:"text fl",attrs:{placeholder:"请输审批链名称"},model:{value:t.formValidate.name,callback:function(e){t.formValidate.name=e},expression:"formValidate.name"}})],1),t._v(" "),a("Form-item",{staticClass:"process",attrs:{label:"流程名称",prop:"processName"}},[a("div",{staticClass:"clear"},[a("Select",{staticClass:"text fl",attrs:{placeholder:"请选择流程名称","label-in-value":!0},on:{"on-change":t.checkProcess},model:{value:t.formValidate.processName,callback:function(e){t.formValidate.processName=e},expression:"formValidate.processName"}},t._l(t.dataList,function(e){return a("Option",{key:new Date,attrs:{value:e.formTypeName}},[t._v(t._s(e.formTypeName))])}))],1),t._v(" "),0!=t.orderNameList.length?a("div",{class:["layer",{active:t.active}],on:{click:function(e){e.stopPropagation(),t.layerClick(e)}}},[a("p",{staticClass:"title"},[t._v("选择流程分类")]),t._v(" "),a("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[a("Checkbox",{attrs:{indeterminate:t.indeterminate,value:t.checkAll},nativeOn:{click:function(e){e.preventDefault(),t.handleCheckAll(e)}}},[t._v("全选")])],1),t._v(" "),a("Checkbox-group",{on:{"on-change":t.checkAllGroupChange},model:{value:t.formValidate.checkAllGroup,callback:function(e){t.formValidate.checkAllGroup=e},expression:"formValidate.checkAllGroup"}},t._l(t.orderNameList,function(t){return a("Checkbox",{key:t,attrs:{label:t}})}))],1):t._e()]),t._v(" "),t.orderType.length>0?a("Form-item",{attrs:{label:"业务类型",prop:"orderType"}},[a("Checkbox-group",{staticClass:"fl",model:{value:t.formValidate.orderType,callback:function(e){t.formValidate.orderType=e},expression:"formValidate.orderType"}},t._l(t.orderType,function(t){return a("Checkbox",{key:new Date,attrs:{label:t}})}))],1):t._e(),t._v(" "),a("div",{staticClass:"tableList"},[a("table",{staticClass:"user",attrs:{cellspacing:"1",cellpadding:"0"}},[a("thead",[a("tr",[a("td",{attrs:{width:"10%"}},[t._v("流程")]),t._v(" "),a("td",[t._v("用户组")]),t._v(" "),a("td",{attrs:{width:"200px"}},[t._v("邮件提醒")])])]),t._v(" "),a("tbody",t._l(t.data,function(e,n){return a("tr",[a("td",[t._v(t._s(e.step))]),t._v(" "),a("td",{on:{click:function(e){t.searchClick(n)}}},[a("Select",{staticClass:"selectText fl",attrs:{placeholder:"请输入用户组",filterable:"",remote:"","remote-method":t.remoteGroup,clearable:!0,loading:t.loading1},model:{value:e.group,callback:function(t){e.group=t},expression:"i.group"}},t._l(t.groups,function(e){return a("Option",{key:new Date,attrs:{value:e.groupId}},[t._v(t._s(e.groupName))])}))],1),t._v(" "),a("td",{staticClass:"clear"},[a("Checkbox",{staticClass:"pass",model:{value:e.passAlert,callback:function(t){e.passAlert=t},expression:"i.passAlert"}},[t._v("通过")]),t._v(" "),a("Checkbox",{model:{value:e.failAlert,callback:function(t){e.failAlert=t},expression:"i.failAlert"}},[t._v("驳回")])],1)])}))])]),t._v(" "),a("Form-item",[a("Button",{staticClass:"saveNext fl",attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.handleSubmit("formValidate",1)}}},[t._v("保存并继续")]),t._v(" "),a("Button",{staticClass:"save fl",attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.handleSubmit("formValidate",2)}}},[t._v("保存")]),t._v(" "),a("Button",{staticClass:"cancel fl",attrs:{type:"ghost"},on:{click:function(e){e.stopPropagation(),t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=11.7c90dcecab0fe7cda876.js.map