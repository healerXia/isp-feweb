webpackJsonp([14],{123:function(e,t,a){a(476);var o=a(61)(a(397),a(511),null,null);e.exports=o.exports},164:function(e,t,a){e.exports={default:a(166),__esModule:!0}},166:function(e,t,a){a(168),e.exports=a(6).Object.assign},167:function(e,t,a){"use strict";var o=a(12),r=a(34),n=a(18),i=a(32),s=a(64),l=Object.assign;e.exports=!l||a(9)(function(){var e={},t={},a=Symbol(),o="abcdefghijklmnopqrst";return e[a]=7,o.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=o})?function(e,t){for(var a=i(e),l=arguments.length,d=1,c=r.f,u=n.f;l>d;)for(var m,f=s(arguments[d++]),p=c?o(f).concat(c(f)):o(f),A=p.length,h=0;A>h;)u.call(f,m=p[h++])&&(a[m]=f[m]);return a}:l},168:function(e,t,a){var o=a(10);o(o.S+o.F,"Object",{assign:a(167)})},397:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(164),r=a.n(o);t.default={data:function(){return{id:"",pageName:"新增单据",pageNames:["新增单据","编辑单据"],formValidate:{formTypeName:"",subFormType:"",formVariable:"",docs:[],condition:[]},ruleValidate:{formTypeName:[{required:!0,message:"请填写单据名称",trigger:"blur"},{validator:function(e,t,a){""===t.trim()?a(new Error("请填写单据名称")):t.trim().length>50?a(new Error("长度不能超过50个字")):a()},trigger:"blur"}]},submitData:{}}},mounted:function(){var e=this;if(1==status)return!1;if(this.$router.currentRoute.query.id){this.pageName=this.pageNames[1];var t=this.$router.currentRoute.query.id;this.id=t,this.$http.get("/isp-process-server/formType/"+t).then(function(t){if(0==t.data.errorCode){var a=r()({},t.data.result),o=[],n=[];o=a.subFormType.split(","),n=a.formVariable.split(","),e.formValidate.formTypeName=a.formTypeName,e.formValidate.subFormType=o.splice(0,1)[0],e.formValidate.formVariable=n.splice(0,1)[0],e.formValidate.docs=o.map(function(e){return{value:e}}),e.formValidate.condition=n.map(function(e){return{value:e}})}else e.$Modal.info({title:"提示",content:t.data.rspMsg.errorMsg})}).catch(function(e){console.log(e)})}else this.pageName=this.pageNames[0]},methods:{handleSubmit:function(e,t){var a=this;this.$refs[e].validate(function(o){if(o){var r=[],n=[];if(a.formValidate.docs.length>0)for(var i=0;i<a.formValidate.docs.length;i++)console.log(a.formValidate.docs[i]),a.formValidate.docs[i].value.trim()&&r.push(a.formValidate.docs[i].value);if(a.formValidate.condition.length>0)for(var s=0;s<a.formValidate.condition.length;s++)a.formValidate.condition[s].value.trim()&&n.push(a.formValidate.condition[s].value);var l="",d="";r.length>0&&(l=a.formValidate.subFormType+","+r.join(",")),n.length>0&&(d=a.formValidate.formVariable+","+n.join(",")),a.submitData={id:a.id,formTypeName:a.formValidate.formTypeName,subFormType:l,formVariable:d},a.$http.post("/isp-process-server/formType/save",a.submitData).then(function(o){0==o.data.errorCode?(a.$Message.success("提交成功!"),1==t?setTimeout(function(){a.$router.push("addDoc"),a.$refs[e].resetFields(),a.submitData={},a.formValidate={formTypeName:"",subFormType:"",formVariable:""},a.formDynamic.docs=[],a.formDynamic.condition=[]},1e3):setTimeout(function(){a.$router.push("docManagemengt"),a.$refs[e].resetFields(),a.submitData={}},1e3)):(a.$Modal.error({title:"提示",content:o.data.errorMsg}),a.formValidate.formTypeName="")}).catch(function(e){console.log(e)})}})},handleReset:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"是否取消当前操作并跳转至列表页？",onOk:function(){t.$router.push("docManagemengt")},onCancel:function(){}})},handleAdd:function(e){if(1==e)return this.formValidate.docs.push({value:""}),!1;this.formValidate.condition.push({value:""})},handleRemove:function(e,t){if(1==t)return this.formValidate.docs.splice(e,1),!1;this.formValidate.condition.splice(e,1)}}}},444:function(e,t,a){t=e.exports=a(120)(!0),t.push([e.i,"#addDoc .title{margin:58px 0 30px 36px;font-size:14px;color:#354052}#addDoc .text{width:400px;height:38px}#addDoc .save,#addDoc .saveNext{margin-right:20px;width:120px;height:38px;background:#4373f3;border-radius:2px;border-color:#4373f3}#addDoc .save:hover,#addDoc .saveNext:hover{opacity:.9}#addDoc .cancel{width:120px;height:38px;background:#484e58;border-radius:2px;color:#fff;border-color:#484e58}#addDoc .cancel:hover{opacity:.9}#addDoc .add{width:120px;height:38px;background:#3d70fb;border-radius:2px;color:#fff}#addDoc .del{height:38px;margin-left:20px}","",{version:3,sources:["/Users/yiche/Desktop/company/newfe/isp_feweb/src/pages/approval/addDoc/AddDoc.vue"],names:[],mappings:"AACA,eACE,wBAAyB,AACzB,eAAgB,AAChB,aAAe,CAChB,AACD,cACE,YAAa,AACb,WAAa,CACd,AACD,gCACE,kBAAmB,AACnB,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,oBAAsB,CACvB,AACD,4CACI,UAAa,CAChB,AACD,gBACE,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,WAAY,AACZ,oBAAsB,CACvB,AACD,sBACI,UAAa,CAChB,AACD,aACE,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,UAAY,CACb,AACD,aACE,YAAa,AACb,gBAAkB,CACnB",file:"AddDoc.vue",sourcesContent:["\n#addDoc .title {\n  margin: 58px 0 30px 36px;\n  font-size: 14px;\n  color: #354052;\n}\n#addDoc .text {\n  width: 400px;\n  height: 38px;\n}\n#addDoc .saveNext, #addDoc .save {\n  margin-right: 20px;\n  width: 120px;\n  height: 38px;\n  background: #4373F3;\n  border-radius: 2px;\n  border-color: #4373F3;\n}\n#addDoc .saveNext:hover, #addDoc .save:hover {\n    opacity: 0.9;\n}\n#addDoc .cancel {\n  width: 120px;\n  height: 38px;\n  background: #484E58;\n  border-radius: 2px;\n  color: #fff;\n  border-color: #484E58;\n}\n#addDoc .cancel:hover {\n    opacity: 0.9;\n}\n#addDoc .add {\n  width: 120px;\n  height: 38px;\n  background: #3D70FB;\n  border-radius: 2px;\n  color: #fff;\n}\n#addDoc .del {\n  height: 38px;\n  margin-left: 20px;\n}\n"],sourceRoot:""}])},476:function(e,t,a){var o=a(444);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(121)("94560b8e",o,!0)},511:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addDoc"}},[a("p",{staticClass:"title"},[e._v(e._s(e.pageName))]),e._v(" "),a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[a("Form-item",{attrs:{label:"单据名称",prop:"formTypeName"}},[a("Input",{staticClass:"text fl",attrs:{placeholder:"请输入单据名称"},model:{value:e.formValidate.formTypeName,callback:function(t){e.formValidate.formTypeName=t},expression:"formValidate.formTypeName"}})],1),e._v(" "),a("Form-item",{attrs:{label:"单据分类"}},[a("Input",{staticClass:"text fl",attrs:{placeholder:"请输入单据分类"},model:{value:e.formValidate.subFormType,callback:function(t){e.formValidate.subFormType=t},expression:"formValidate.subFormType"}})],1),e._v(" "),e._l(e.formValidate.docs,function(t,o){return a("Form-item",{key:t,attrs:{prop:"docs."+o+".value",rules:{max:50,message:"长度不能超过50个字",trigger:"blur"}}},[a("Input",{staticClass:"text fl",attrs:{type:"text",placeholder:"请输入单据分类"},model:{value:t.value,callback:function(e){t.value=e},expression:"item.value"}}),e._v(" "),a("Button",{staticClass:"del fl",attrs:{type:"ghost"},on:{click:function(t){e.handleRemove(o,1)}}},[e._v("删除")])],1)}),e._v(" "),a("Form-item",[a("Button",{staticClass:"text add",attrs:{type:"button",long:"",icon:"plus-round"},on:{click:function(t){e.handleAdd(1)}}},[e._v("继续添加")])],1),e._v(" "),a("Form-item",{attrs:{label:"单据条件"}},[a("Input",{staticClass:"text fl",attrs:{placeholder:"请输入单据条件"},model:{value:e.formValidate.formVariable,callback:function(t){e.formValidate.formVariable=t},expression:"formValidate.formVariable"}})],1),e._v(" "),e._l(e.formValidate.condition,function(t,o){return a("Form-item",{key:t,attrs:{prop:"condition."+o+".value",rules:{max:50,message:"长度不能超过50个字",trigger:"blur"}}},[a("Input",{staticClass:"text fl",attrs:{type:"text",placeholder:"请输入单据条件"},model:{value:t.value,callback:function(e){t.value=e},expression:"item.value"}}),e._v(" "),a("Button",{staticClass:"del fl",attrs:{type:"ghost"},on:{click:function(t){e.handleRemove(o,2)}}},[e._v("删除")])],1)}),e._v(" "),a("Form-item",[a("Button",{staticClass:"text add",attrs:{type:"button",long:"",icon:"plus-round"},on:{click:function(t){e.handleAdd(2)}}},[e._v("继续添加")])],1),e._v(" "),a("Form-item",[a("Button",{staticClass:"saveNext fl",attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate",1)}}},[e._v("保存并继续")]),e._v(" "),a("Button",{staticClass:"save fl",attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate",2)}}},[e._v("保存")]),e._v(" "),a("Button",{staticClass:"cancel fl",attrs:{type:"ghost"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("取消")])],1)],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=14.8dd4f465b019dedb0838.js.map