webpackJsonp([31],{144:function(e,a,t){t(575);var n=t(61)(t(445),t(639),null,null);e.exports=n.exports},445:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(470);a.default={data:function(){return{imgPath:[],errorCon:{uploadErr:""},judgeErr:{uploadErrShow:!1},options:{classiflyOption:[{name:"优化建议",value:1},{name:"客户",value:2},{name:"订单",value:3},{name:"合同",value:4},{name:"发票",value:5},{name:"App",value:6},{name:"其他",value:7}]},feedbackAdd:{problemType:"",createName:"",createId:"",feedback:"",feedBackChannel:"PC"},checkValue:{problemType:[{required:!0,message:"请选择反馈分类",trigger:"change",type:"number"}],feedback:[{required:!0,message:"请填写反馈内容",trigger:"blur"},{max:500,message:"不能超过500字",trigger:"blur"}]}}},created:function(){var e=this;this.$http.get(n.a.urlList.login).then(function(a){0===a.data.errorCode?(e.feedbackAdd.createName=a.data.result.username,e.feedbackAdd.createId=a.data.result.uid):e.$Modal.info({title:"提示",content:a.data.errorMsg})}).catch(function(e){})},methods:{submitFeedback:function(e){var a=this;this.$refs[e].validate(function(e){e?a.$http.post(n.a.urlList.insertUserFeedback,a.feedbackAdd,{emulateJSON:!0}).then(function(e){0===e.data.errorCode?a.$Modal.success({title:"提示",content:"提交意见反馈成功",onOk:function(){a.$router.push({path:"myFeedbackList"})}}):a.$Modal.info({title:"提示",content:e.data.errorMsg})}).catch(function(e){}):a.$Modal.error({title:"提示",content:"表单验证失败！"})})},cancleFeedback:function(e){this.$refs[e].resetFields()},handleFormatError:function(e){this.errorCon.uploadErr="文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。",this.judgeErr.uploadErrShow=tru},handleMaxSize:function(e){this.errorCon.uploadErr="文件 "+e.name+" 太大，不能超过1M。",this.judgeErr.uploadErrShow=!0},fileUploadSuccess:function(e,a,t){var n=/(\.com\/)([\w.]+)/;e.result.match(n);this.imgPath.push(e.result)}}}},470:function(e,a,t){"use strict";var n={insertUserFeedback:"isp-kongming/cust/insertUserFeedback",login:"/isp-kongming/ad/login"};a.a={urlList:n}},522:function(e,a,t){a=e.exports=t(121)(!0),a.push([e.i,".createFeedback .title{font-size:14px;color:#333;padding-left:30px}.createFeedback .upload{width:100%;padding-bottom:20px}.createFeedback .upload .label{display:inline-block;width:95px;height:38px;line-height:38px;text-align:right;padding:10px 12px 10px 0}.createFeedback .upload .ivu-upload{display:inline-block}.createFeedback .upload .ivu-upload .ivu-upload-list{display:none}.createFeedback .upload .imgShow{width:100%}.createFeedback .upload .uperror{padding-left:130px;width:100%;display:block}.createFeedback .ivu-input-wrapper,.createFeedback .ivu-select{width:360px!important;float:left}","",{version:3,sources:["/Users/yiche/Desktop/company/newfe/isp_feweb/src/pages/feedbackModule/createFeedback/CreateFeedback.vue"],names:[],mappings:"AACA,uBACE,eAAgB,AAChB,WAAY,AACZ,iBAAmB,CACpB,AACD,wBACE,WAAY,AACZ,mBAAqB,CACtB,AACD,+BACI,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,iBAAkB,AAClB,wBAA0B,CAC7B,AACD,oCACI,oBAAsB,CACzB,AACD,qDACM,YAAc,CACnB,AACD,iCACI,UAAY,CACf,AACD,iCACI,mBAAoB,AACpB,WAAY,AACZ,aAAe,CAClB,AACD,+DACE,sBAAwB,AACxB,UAAY,CACb",file:"CreateFeedback.vue",sourcesContent:["\n.createFeedback .title {\n  font-size: 14px;\n  color: #333;\n  padding-left: 30px;\n}\n.createFeedback .upload {\n  width: 100%;\n  padding-bottom: 20px;\n}\n.createFeedback .upload .label {\n    display: inline-block;\n    width: 95px;\n    height: 38px;\n    line-height: 38px;\n    text-align: right;\n    padding: 10px 12px 10px 0;\n}\n.createFeedback .upload .ivu-upload {\n    display: inline-block;\n}\n.createFeedback .upload .ivu-upload .ivu-upload-list {\n      display: none;\n}\n.createFeedback .upload .imgShow {\n    width: 100%;\n}\n.createFeedback .upload .uperror {\n    padding-left: 130px;\n    width: 100%;\n    display: block;\n}\n.createFeedback .ivu-select, .createFeedback .ivu-input-wrapper {\n  width: 360px !important;\n  float: left;\n}\n"],sourceRoot:""}])},575:function(e,a,t){var n=t(522);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(122)("a32a2c2a",n,!0)},639:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"createFeedback"},[t("div",{staticClass:"title MT20 MB20"},[e._v("意见反馈")]),e._v(" "),t("Form",{ref:"feedbackAdd",attrs:{model:e.feedbackAdd,rules:e.checkValue,"label-width":100}},[t("Form-item",{attrs:{label:"反馈分类:",prop:"problemType"}},[t("Select",{attrs:{clearable:!0,placeholder:"请选择反馈分类"},model:{value:e.feedbackAdd.problemType,callback:function(a){e.feedbackAdd.problemType=a},expression:"feedbackAdd.problemType"}},e._l(e.options.classiflyOption,function(a){return t("Option",{key:a.value,attrs:{value:a.value}},[e._v(e._s(a.name))])}))],1),e._v(" "),t("Form-item",{attrs:{label:"反馈内容:",prop:"feedback"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},placeholder:"请输入反馈内容"},model:{value:e.feedbackAdd.feedback,callback:function(a){e.feedbackAdd.feedback=a},expression:"feedbackAdd.feedback"}})],1),e._v(" "),t("div",{staticClass:"upload"},[t("span",{staticClass:"label"},[e._v("附件:")]),e._v(" "),t("Upload",{attrs:{action:"/api/isp-kongming/cust/imgUpdate",format:["jpg","jpeg","png"],"max-size":10240,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"on-success":e.fileUploadSuccess}},[t("Button",{staticClass:"btn bg4373F3",attrs:{type:"ghost"}},[e._v("上传文件")]),e._v(" "),t("span",{staticClass:"ML15"},[e._v("请上传1M以内的文件")])],1),e._v(" "),t("div",{staticClass:"imgShow"},e._l(e.imgPath,function(e){return t("img",{staticClass:"MR20",staticStyle:{width:"50px"},attrs:{src:e}})})),e._v(" "),e.judgeErr.uploadErrShow?t("span",{staticClass:"colorRed uperror"},[e._v(e._s(e.errorCon.uploadErr))]):e._e()],1),e._v(" "),t("Form-item",[t("Button",{staticClass:"btn bg4373F3",attrs:{type:"primary"},on:{click:function(a){e.submitFeedback("feedbackAdd")}}},[e._v("保存")]),e._v(" "),t("Button",{staticClass:"btn bgCancle ML15",attrs:{type:"primary"},on:{click:function(a){e.cancleFeedback("feedbackAdd")}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=31.dc554493399ef0e69339.js.map